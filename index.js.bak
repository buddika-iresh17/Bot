const fs = require('fs');
const https = require('https');
const AdmZip = require('adm-zip');
const { exec } = require('child_process');

const ZIP_URL = 'https://your-domain.com/MANISHA-MD.zip'; // <-- ‡∂î‡∂∂‡∑ö zip direct download link
const ZIP_PATH = './bot.zip';
const EXTRACT_PATH = './MANISHA-MD';

console.log("‚¨áÔ∏è Bot zip downloading...");

const file = fs.createWriteStream(ZIP_PATH);
https.get(ZIP_URL, (response) => {
  response.pipe(file);
  file.on('finish', () => {
    file.close(() => {
      console.log("‚úÖ Download complete. Extracting...");

      try {
        const zip = new AdmZip(ZIP_PATH);
        zip.extractAllTo(EXTRACT_PATH, true);
        console.log("‚úÖ Bot extracted.");

        console.log("üöÄ Starting bot...");
        exec(`node ${EXTRACT_PATH}/start.js`, (err, stdout, stderr) => {
          if (err) {
            console.error("‚ùå Error starting bot:", err);
            return;
          }
          console.log(stdout);
        });

      } catch (e) {
        console.error("‚ùå Extract failed:", e);
      }
    });
  });
});